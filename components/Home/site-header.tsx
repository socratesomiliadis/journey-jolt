"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import { motion } from "framer-motion";
import {
  NavigationMenu,
  NavigationMenuContent,
  NavigationMenuItem,
  NavigationMenuLink,
  NavigationMenuList,
  NavigationMenuTrigger,
} from "@/components/ui/navigation-menu";
import { Button } from "@/components/ui/button";
import { useSession } from "@/lib/auth-client";
import { ThemeToggle } from "../theme-switcher";

export function SiteHeader() {
  const pathname = usePathname();
  const isAuthPage = pathname === "/login" || pathname === "/signup";
  const isDashboardRoute = pathname?.includes("dashboard");
  const { data: session } = useSession();
  const isLoggedIn = !!session;

  if (isDashboardRoute) {
    return null;
  }

  return (
    <motion.header
      initial={{ y: -100 }}
      animate={{ y: 0 }}
      transition={{ duration: 0.5 }}
      className="fixed top-0 z-50 w-full border-b border-black/[0.03] dark:border-white/[0.05] bg-white/90 dark:bg-jjBlack/90 backdrop-blur-lg supports-[backdrop-filter]:bg-white/50 supports-[backdrop-filter]:dark:bg-jjBlack/50 flex justify-center"
    >
      <div className="container flex h-20 items-center justify-between">
        <Link href="/" className="flex items-center space-x-2">
          <motion.span
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            // transition={{ delay: 0.5 }}
            className="block w-40 text-black dark:text-white"
          >
            <svg
              width="100%"
              viewBox="0 0 1586 351"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M335.679 275V243.979H346.35C354.291 243.979 360.578 241.745 365.211 237.278C370.009 232.646 372.408 226.524 372.408 218.914V90.1133H406.407V217.673C406.407 229.089 403.925 239.098 398.962 247.701C394.164 256.305 387.215 263.005 378.116 267.803C369.182 272.601 358.593 275 346.35 275H335.679ZM492.169 277.978C478.934 277.978 466.856 274.917 455.936 268.796C445.182 262.674 436.579 254.319 430.127 243.731C423.84 233.142 420.696 221.064 420.696 207.498C420.696 193.931 423.84 181.853 430.127 171.265C436.579 160.676 445.182 152.321 455.936 146.2C466.69 140.078 478.768 137.017 492.169 137.017C505.405 137.017 517.4 140.078 528.154 146.2C538.908 152.321 547.428 160.676 553.715 171.265C560.168 181.688 563.394 193.766 563.394 207.498C563.394 221.064 560.168 233.142 553.715 243.731C547.263 254.319 538.66 262.674 527.906 268.796C517.152 274.917 505.24 277.978 492.169 277.978ZM492.169 248.198C499.449 248.198 505.819 246.46 511.278 242.986C516.904 239.512 521.288 234.714 524.431 228.592C527.74 222.305 529.395 215.274 529.395 207.498C529.395 199.556 527.74 192.608 524.431 186.651C521.288 180.53 516.904 175.732 511.278 172.258C505.819 168.618 499.449 166.798 492.169 166.798C484.724 166.798 478.189 168.618 472.564 172.258C466.939 175.732 462.472 180.53 459.163 186.651C456.019 192.608 454.447 199.556 454.447 207.498C454.447 215.274 456.019 222.305 459.163 228.592C462.472 234.714 466.939 239.512 472.564 242.986C478.189 246.46 484.724 248.198 492.169 248.198ZM623.785 277.978C613.362 277.978 604.262 275.662 596.486 271.029C588.875 266.397 583.002 259.944 578.866 251.672C574.895 243.4 572.91 233.721 572.91 222.636V139.995H605.42V219.906C605.42 225.531 606.496 230.495 608.646 234.796C610.963 238.933 614.189 242.242 618.325 244.723C622.627 247.04 627.425 248.198 632.719 248.198C638.013 248.198 642.728 247.04 646.865 244.723C651.001 242.242 654.227 238.85 656.543 234.548C658.859 230.247 660.018 225.118 660.018 219.162V139.995H692.528V275H661.755V248.446L664.485 253.161C661.341 261.433 656.13 267.638 648.85 271.774C641.736 275.91 633.381 277.978 623.785 277.978ZM715.303 275V139.995H745.828V170.024L743.346 165.557C746.49 155.465 751.371 148.433 757.989 144.463C764.772 140.492 772.879 138.506 782.309 138.506H790.251V167.294H778.587C769.322 167.294 761.877 170.189 756.251 175.98C750.626 181.605 747.814 189.547 747.814 199.804V275H715.303ZM800.68 275V139.995H831.204V166.55L828.723 161.834C831.866 153.728 836.995 147.606 844.109 143.47C851.389 139.168 859.827 137.017 869.423 137.017C879.35 137.017 888.118 139.168 895.729 143.47C903.505 147.771 909.544 153.81 913.845 161.586C918.147 169.197 920.298 178.048 920.298 188.14V275H887.787V195.834C887.787 189.878 886.629 184.749 884.313 180.447C881.997 176.146 878.77 172.837 874.634 170.52C870.664 168.039 865.948 166.798 860.489 166.798C855.194 166.798 850.479 168.039 846.343 170.52C842.207 172.837 838.98 176.146 836.664 180.447C834.348 184.749 833.19 189.878 833.19 195.834V275H800.68ZM1004.37 277.978C990.474 277.978 978.313 274.835 967.89 268.548C957.467 262.261 949.36 253.74 943.569 242.986C937.779 232.232 934.883 220.32 934.883 207.25C934.883 193.683 937.779 181.688 943.569 171.265C949.525 160.676 957.55 152.321 967.642 146.2C977.9 140.078 989.315 137.017 1001.89 137.017C1012.48 137.017 1021.74 138.755 1029.68 142.229C1037.79 145.703 1044.66 150.501 1050.28 156.623C1055.91 162.744 1060.21 169.776 1063.19 177.717C1066.17 185.493 1067.65 193.931 1067.65 203.031C1067.65 205.347 1067.49 207.746 1067.16 210.228C1066.99 212.709 1066.58 214.86 1065.92 216.68H961.686V191.863H1047.55L1032.17 203.527C1033.66 195.916 1033.24 189.133 1030.93 183.177C1028.77 177.221 1025.13 172.506 1020.01 169.031C1015.04 165.557 1009 163.82 1001.89 163.82C995.106 163.82 989.067 165.557 983.773 169.031C978.479 172.34 974.425 177.304 971.613 183.922C968.965 190.374 967.973 198.233 968.635 207.498C967.973 215.77 969.048 223.132 971.861 229.585C974.839 235.872 979.14 240.753 984.766 244.227C990.556 247.701 997.174 249.438 1004.62 249.438C1012.06 249.438 1018.35 247.867 1023.48 244.723C1028.77 241.58 1032.91 237.361 1035.89 232.067L1062.19 244.971C1059.55 251.424 1055.41 257.132 1049.79 262.095C1044.16 267.059 1037.46 270.947 1029.68 273.759C1022.07 276.572 1013.64 277.978 1004.37 277.978ZM1101.23 329.846C1097.59 329.846 1094.04 329.515 1090.56 328.853C1087.09 328.357 1083.94 327.447 1081.13 326.123V298.824C1083.28 299.321 1085.85 299.817 1088.82 300.313C1091.97 300.81 1094.86 301.058 1097.51 301.058C1104.96 301.058 1110.33 299.321 1113.64 295.846C1117.12 292.372 1120.18 287.822 1122.82 282.197L1131.76 261.351L1131.26 288.649L1072.45 139.995H1107.44L1148.63 249.687H1136.22L1177.17 139.995H1212.41L1153.6 288.649C1150.12 297.418 1145.9 304.863 1140.94 310.985C1135.98 317.106 1130.19 321.739 1123.57 324.882C1117.12 328.191 1109.67 329.846 1101.23 329.846ZM1212.4 275V243.979H1223.07C1231.01 243.979 1237.3 241.745 1241.93 237.278C1246.73 232.646 1249.13 226.524 1249.13 218.914V90.1133H1283.13V217.673C1283.13 229.089 1280.64 239.098 1275.68 247.701C1270.88 256.305 1263.93 263.005 1254.83 267.803C1245.9 272.601 1235.31 275 1223.07 275H1212.4ZM1368.89 277.978C1355.65 277.978 1343.57 274.917 1332.66 268.796C1321.9 262.674 1313.3 254.319 1306.85 243.731C1300.56 233.142 1297.42 221.064 1297.42 207.498C1297.42 193.931 1300.56 181.853 1306.85 171.265C1313.3 160.676 1321.9 152.321 1332.66 146.2C1343.41 140.078 1355.49 137.017 1368.89 137.017C1382.12 137.017 1394.12 140.078 1404.87 146.2C1415.63 152.321 1424.15 160.676 1430.43 171.265C1436.89 181.688 1440.11 193.766 1440.11 207.498C1440.11 221.064 1436.89 233.142 1430.43 243.731C1423.98 254.319 1415.38 262.674 1404.62 268.796C1393.87 274.917 1381.96 277.978 1368.89 277.978ZM1368.89 248.198C1376.17 248.198 1382.54 246.46 1388 242.986C1393.62 239.512 1398.01 234.714 1401.15 228.592C1404.46 222.305 1406.11 215.274 1406.11 207.498C1406.11 199.556 1404.46 192.608 1401.15 186.651C1398.01 180.53 1393.62 175.732 1388 172.258C1382.54 168.618 1376.17 166.798 1368.89 166.798C1361.44 166.798 1354.91 168.618 1349.28 172.258C1343.66 175.732 1339.19 180.53 1335.88 186.651C1332.74 192.608 1331.17 199.556 1331.17 207.498C1331.17 215.274 1332.74 222.305 1335.88 228.592C1339.19 234.714 1343.66 239.512 1349.28 242.986C1354.91 246.46 1361.44 248.198 1368.89 248.198ZM1452.36 275V87.1352H1484.87V275H1452.36ZM1568.99 276.489C1553.77 276.489 1541.94 272.353 1533.5 264.081C1525.23 255.643 1521.09 243.813 1521.09 228.592V169.031H1497.76V139.995H1500.24C1506.86 139.995 1511.99 138.258 1515.63 134.784C1519.27 131.31 1521.09 126.263 1521.09 119.646V109.222H1553.6V139.995H1584.62V169.031H1553.6V226.855C1553.6 231.322 1554.35 235.127 1555.83 238.271C1557.49 241.414 1559.97 243.813 1563.28 245.468C1566.75 247.122 1571.14 247.949 1576.43 247.949C1577.59 247.949 1578.91 247.867 1580.4 247.701C1582.06 247.536 1583.63 247.37 1585.12 247.205V275C1582.8 275.331 1580.15 275.662 1577.18 275.993C1574.2 276.324 1571.47 276.489 1568.99 276.489Z"
                fill="currentColor"
              />
              <path
                d="M120.944 112.159C120.944 107.836 116.511 104.932 112.548 106.658L3.94404 153.975C1.80874 154.906 0.405694 156.982 0.356891 159.31C0.13689 169.807 -0.365761 200.497 0.444458 232.5C1.44449 272 46.0445 351.2 132.444 350C218.844 348.8 265.944 271 265.944 234.5V6.09924C265.944 1.79174 261.54 -1.11244 257.581 0.584369L150.581 46.4415C148.375 47.387 146.944 49.5562 146.944 51.9564V185.344C146.944 193 154.903 199.366 160.345 204.1C170 212.5 181.496 219.718 199.739 226.352C201.063 226.833 201.944 228.091 201.944 229.5C201.944 230.909 201.063 232.167 199.739 232.648C181.496 239.282 169.468 245.776 160.345 254.9C151.221 264.024 144.727 276.052 138.093 294.295C137.611 295.619 136.353 296.5 134.944 296.5C133.536 296.5 132.278 295.619 131.796 294.295C125.162 276.052 118.668 264.024 109.544 254.9C100.421 245.776 88.3927 239.282 70.1496 232.648C68.8257 232.167 67.9445 230.909 67.9445 229.5C67.9445 228.091 68.8257 226.833 70.1496 226.352C88.3927 219.718 100.376 213.224 109.5 204.1C113.784 199.816 120.944 189.361 120.944 185.344V112.159Z"
                fill="#1E92FF"
              />
            </svg>
          </motion.span>
        </Link>
        <NavigationMenu className="hidden md:flex">
          <NavigationMenuList>
            <NavigationMenuItem>
              <NavigationMenuTrigger className="h-10 px-4 bg-transparent dark:bg-transparent">
                Products
              </NavigationMenuTrigger>
              <NavigationMenuContent>
                <div className="grid gap-3 p-6 w-[400px] md:w-[500px]">
                  <div className="grid gap-1">
                    <NavigationMenuLink asChild>
                      <Link
                        href="#"
                        className="block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"
                      >
                        <div className="text-sm font-medium leading-none">
                          Bot Builder
                        </div>
                        <p className="line-clamp-2 text-sm leading-snug text-muted-foreground">
                          Create powerful Discord bots without code
                        </p>
                      </Link>
                    </NavigationMenuLink>
                  </div>
                </div>
              </NavigationMenuContent>
            </NavigationMenuItem>
            <NavigationMenuItem>
              <NavigationMenuTrigger className="h-10 px-4 bg-transparent dark:bg-transparent">
                Resources
              </NavigationMenuTrigger>
              <NavigationMenuContent>
                <div className="grid gap-3 p-6 w-[400px] md:w-[500px]">
                  <div className="grid gap-1">
                    <NavigationMenuLink asChild>
                      <Link
                        href="#"
                        className="block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground"
                      >
                        <div className="text-sm font-medium leading-none">
                          Documentation
                        </div>
                        <p className="line-clamp-2 text-sm leading-snug text-muted-foreground">
                          Learn how to build and customize your bots
                        </p>
                      </Link>
                    </NavigationMenuLink>
                  </div>
                </div>
              </NavigationMenuContent>
            </NavigationMenuItem>
            <NavigationMenuItem>
              <Link href="/#pricing" legacyBehavior passHref>
                <NavigationMenuLink className="h-10 px-4 py-2">
                  Pricing
                </NavigationMenuLink>
              </Link>
            </NavigationMenuItem>
          </NavigationMenuList>
        </NavigationMenu>
        {!isAuthPage && !isLoggedIn && (
          <div className="flex items-center space-x-4">
            <Button
              variant="ghost"
              size="sm"
              asChild
              className="text-base tracking-tight"
            >
              <Link href="/login">Log in</Link>
            </Button>
            <Button
              asChild
              className="text-base tracking-tight py-4 px-6 bg-jjBlue hover:bg-jjBlue/80 font-normal"
            >
              <Link href="/signup">Get Started</Link>
            </Button>
            <ThemeToggle />
          </div>
        )}
        {isLoggedIn && (
          <div className="flex items-center space-x-4">
            <Button
              asChild
              className="text-base tracking-tight py-4 px-6 bg-jjBlue hover:bg-jjBlue/80 font-normal"
            >
              <Link href="/dashboard">Dashboard</Link>
            </Button>
            <ThemeToggle />
          </div>
        )}
      </div>
    </motion.header>
  );
}
